---
import type { CollectionEntry } from "astro:content";
import { toTagSlug } from "../lib/articles";

interface Props {
  article: CollectionEntry<"articles">;
}

const { article } = Astro.props;
---

<article
  class="group relative rounded-2xl border border-[var(--color-muted)]/25 bg-[var(--color-surface)]/55 p-6 shadow-[0_8px_24px_rgba(47,65,86,0.06)] transition-all duration-200 hover:-translate-y-0.5 hover:bg-[var(--color-surface)]/70 hover:shadow-[0_14px_36px_rgba(47,65,86,0.12)]"
>
  <a
    href={`/articles/${article.slug}/`}
    class="absolute inset-0 z-10 rounded-2xl"
    aria-label={`Open article: ${article.data.title}`}
  ></a>

  <p class="text-xs uppercase tracking-[0.14em] text-[var(--color-muted)]">
    <time datetime={article.data.date.toISOString()}>
      {article.data.date.toLocaleDateString("en-US", {
        year: "numeric",
        month: "short",
        day: "numeric",
      })}
    </time>
    <span class="mx-2">â€¢</span>
    <span>{article.data.readingTime} min read</span>
  </p>

  <h3 class="mt-3 font-heading text-2xl leading-tight text-[var(--color-text)] transition-colors duration-200 group-hover:text-[var(--color-accent)]">
    {article.data.title}
  </h3>

  <p class="mt-3 text-[0.98rem] leading-relaxed text-[var(--color-muted)]">{article.data.description}</p>

  {article.data.tags.length > 0 && (
    <ul class="relative z-20 mt-4 flex flex-wrap gap-2">
      {article.data.tags.map((tag) => (
        <li>
          <a
            href={`/articles/tag/${toTagSlug(tag)}/`}
            class="inline-flex rounded-full border border-[var(--color-text)]/15 bg-[var(--color-white)]/90 px-2.5 py-1 text-xs text-[var(--color-text)] transition-colors duration-200 hover:border-[var(--color-text)]/35 hover:bg-[var(--color-white)]"
          >
            {tag}
          </a>
        </li>
      ))}
    </ul>
  )}
</article>
